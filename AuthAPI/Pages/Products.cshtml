@page
@model AuthAPI.Pages.ProductsModel
@{
}

<!DOCTYPE html>
<html>
<head>
    <title>Products</title>
</head>
<body>
    <h1>Products</h1>
    <ul id="productList">
        <!-- Product items will be added here dynamically -->
    </ul>

    <script>
        // Fetch data from the API endpoint
        fetch('/api/Products')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Failed to fetch products');
                }
                return response.json(); // Parse response JSON
            })
            .then(products => {
                // Handle the resolved JSON data (list of products)
                const productList = document.getElementById('productList');
                products.forEach(product => {
                    const listItem = document.createElement('li');
                    listItem.textContent = `${product.name} - $${product.price}`;
                    productList.appendChild(listItem);
                });
            })
            .catch(error => {
                console.error('Error fetching products:', error);
            });
    </script>
</body>
</html>